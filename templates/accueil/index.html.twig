{% extends 'base.html.twig' %}
{% block body %}
    <div class="w-full flex justify-center text-white">
        <h1 class="text-center text-xl font-bold w-full">Bid Card Coin !</h1>
    </div>
    <div class="w-full flex justify-center text-white">
        <h1 class="text-start text-xl font-bold w-full ml-5 border-b">Les 9 prochaines ventes</h1>
    </div>
    <div class="bg-image w-full flex flex-wrap justify-center gap-3 py-5">
        {% for key in lots|keys %}
            <div class="backdrop w-10/12 md:w-1/4 bg-white bg-opacity-10 rounded p-3 text-white border border-gray-300 shadow-lg h-auto relative">
                <!-- header -->
                <div class="w-8/12 mb-3 pb-3 border-b border-1 border-white">
                    <h3 class="text-xl font-semibold text-shadow">{{ lots[key].getNom() }}</h3>
                </div>
                <!-- body -->
                <div>
                    <img src="{{ lots[key].getPhoto() }}" alt="image lot {{ lots[key].getId() }}"
                         class="w-full h-48 object-cover mb-2">
                    <p class="mb-3 tracking-wide text-base text-shadow">
                        {{ lots[key].getDescription() }}
                    </p>
                    <p class="mb-10 tracking-wide text-base text-shadow">
                        <i class="fas fa-map-pin mr-2"></i> : {{ lots[key].getLieuVenteLot() }}
                    </p>

                    <p class="px-3 py-1.5 text-sm fixed right-0 top-0 font-bold">
                        {{ lots[key].getDateVenteLot() }}
                    </p>
                    <p class="px-3 py-1.5 text-lg fixed right-0 top-5 font-bold">
                        {{ lots[key].getNumberOfProducts() }} produits
                    </p>
                    <p class="px-3 py-1.5 text-lg fixed left-0 bottom-0 font-bold">
                        {{ lots[key].getPrixOfProducts() }} â‚¬
                    </p>
                    <a href="/lot/{{ lots[key].getId() }}"
                       class="border-l border-t border-white bg-white bg-opacity-0 px-3 py-1.5 hover:bg-opacity-10 text-lg absolute right-0 bottom-0 font-bold">
                        Detail du lot <i class="ml-3 fas fa-chevron-right"></i>
                    </a>
                </div>
            </div>
        {% endfor %}
    </div>
    {# Fenetre pour selectionner la date #}
    <div class="fixed h-1/2 w-56 backdrop right-0 flex justify-center items-center flex-wrap text-white shadow bg-gray-800 bg-opacity-10 rounded-l border-2 border-r-0">
        <h1 class="w-full flex justify-center items-center text-center text-xl font-bold">Voir pour les lots de :</h1>
        <a class="w-full flex justify-center items-center text-center text-white text-xl" href="/week"><span
                    class="text-base mx-auto font-bold"><i class="fas fa-calendar-week mx-2"></i>1 | La semaine prochaine</span></a>
        <a class="w-full flex justify-center items-center text-center text-white text-xl" href="/week/2"><span
                    class="text-base mx-auto font-bold"><i class="fas fa-calendar-week mx-2"></i>2 | Dans deux semaines</span></a>
        <a class="w-full flex justify-center items-center text-center text-white text-xl" href="/week/3"><span
                    class="text-base mx-auto font-bold"><i class="fas fa-calendar-week mx-2"></i>3 | Dans trois semaines</span></a>
        <form class="w-full flex justify-center items-center text-center text-white text-xl flex-wrap">
            <p class="w-full text-center flex justify-center items-center border-t pt-4">Entre ces deux dates :</p>
            <div class="w-full mt-2">
                <input class="border border-grey-300 bg-transparent text-center font-normal text-xs focus:outline-none filter-invert"
                       type="date" id="dateInf" name="dateInf" min="{{ now }}">
            </div>
            <div class="w-full mt-2">
                <input class="border border-grey-300 bg-transparent text-center font-normal text-xs focus:outline-none filter-invert"
                       type="date" id="dateSupp" name="dateSupp" min="{{ now }}">
            </div>
            <div class="w-full mt-2 flex justify-end items-center">
                <button type="button" onclick="checkValue()"
                        class="bg-gray-800 bg-opacity-20 border border-grey-300 rounded bg-transparent text-center font-normal text-xs focus:outline-none filter-invert p-1 m-2">
                    <i class="mx-2 fas fa-calendar-check"></i>Aller voir<i class="mx-2 fas fa-chevron-right"></i>
                </button>
            </div>
        </form>
    </div>
    <script>
        function checkValue() {
            if ((document.getElementById('dateInf').value) && (document.getElementById('dateSupp').value)) {
                return (window.location.href = '/date/' + document.getElementById('dateInf').value + '/' + document.getElementById('dateSupp').value)
            } else {
                console.log("Date non valides");
            }
        }
    </script>
{% endblock %}